{% extends 'ticker/ticker.html' %}

{% block title %}Coin / Token Data{% endblock %}

{% block body %}

{% with url_ticker='ticker.ticker', params=dict() %}
{% include 'snippets/menu.html' %}
{% endwith %}

<script src="/static/js/charts/coin_or_token.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function() {
        const fs = {{ frequencies_charts|safe }};
        for (let i in fs) {
            setTimeout(function () {
                get_chart_coin_or_token_data(render_data_charts, '{{ coin_or_token }}', fs[i]);
            }, i * 500);
        }
    });
</script>

<script type="text/javascript">
function post_ticker_emit(id, json) {
    _post_ticker_emit(
        id, json, '{{ reference["name"] }}', '{{ reference["pair"] }}', '{{ coin_or_token }}'
    );
}
</script>

<br/>

<div style="float: right">
    <label for="select_coin_or_token">
        Coin or Token:
        <select id="select_coin_or_token">
{% for t in tokens %}
            <option value="{{ t }}" {{ 'selected' if t == coin_or_token else '' }}>{{ t }}</option>
{% endfor %}
        </select>
    </label>
</div>

<script type="text/javascript">
$('#select_coin_or_token').on('change', function() {
    const url = '{{url_for("tools.coin_or_token_frequency", coin_or_token="COIN-OR-TOKEN")}}';
    location.href = url.replace('COIN-OR-TOKEN', this.value);
    return false;
});
</script>

<div class="row">

{% for f in frequencies_charts %}
<div class="twelve columns" id="row_chart_{{ coin_or_token }}{{ f }}" style="display: none;">
    <div id="chart_{{ coin_or_token }}{{ f }}"></div>
    <p class="highcharts-description" style="font-size:small">
        <b>Source:</b> {{ reference['name']|capitalize }}, <b>Pair:</b> {{ coin_or_token }}/{{ reference['pair'] }}
    </p>
    <br/><br/>
</div>
{% endfor %}

</div>

{% endblock %}
