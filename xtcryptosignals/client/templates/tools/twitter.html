{% extends 'base.html' %}

{% block title %}Twitter Data{% endblock %}

{% block include_scripts_top %}
<script src="/static/js/site.js" type="text/javascript"></script>
<script src="//code.highcharts.com/highcharts.js" type="text/javascript"></script>
<script src="/static/js/charts/twitter.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function() {
        get_chart_twitter_data(render_data);
    });
</script>

<script type="text/javascript">
    let charts=[];
    function render_data(data) {
        const projects_twitter = data.projects_twitter;
        let i = 0
        for (const pt in projects_twitter) {
            setTimeout(function () {
                const chart_id = `chart_${pt}`
                let chart = create_chart_twitter(chart_id, pt);
                chart.addSeries({
                    type: 'area',
                    name: pt,
                    data: projects_twitter[pt],
                }, true, true);
                charts.push(chart);
                setChartTheme();
                $(`#row_${chart_id}`).show();
            }, i * 500);
            i++
        }
    }
</script>

<script type="text/javascript">
    $(document).ready(function() {
        $(".navbar-countdown").hide();
    });
</script>
{% endblock %}

{% block body %}

{% with url_ticker='ticker.ticker', params=dict() %}
{% include 'menu.html' %}
{% endwith %}

<br/>

{% for p in projects_twitter %}
<div class="{{ loop.cycle('_row', 'row') }}">
    <div class="six columns" id="row_chart_{{ p }}" style="display: none;">
        <div id="chart_{{ p }}"></div>
    </div>
</div>
{% endfor %}

{% endblock %}
